<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI投資決策小幫手</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- 側邊欄 -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>🤖 AI投資助手</h2>
            <button class="sidebar-toggle" id="sidebar-toggle">☰</button>
        </div>

        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-page="analysis">
                <span class="nav-icon">📊</span>
                <span class="nav-text">股票分析</span>
            </a>
            <a href="#" class="nav-item" data-page="watchlist">
                <span class="nav-icon">⭐</span>
                <span class="nav-text">觀察清單</span>
                <span class="badge" id="watchlist-count">0</span>
            </a>
            <a href="#" class="nav-item" data-page="history">
                <span class="nav-icon">📜</span>
                <span class="nav-text">分析歷史</span>
                <span class="badge" id="history-count">0</span>
            </a>
            <a href="#" class="nav-item" data-page="compare">
                <span class="nav-icon">⚖️</span>
                <span class="nav-text">股票比較</span>
            </a>
            <a href="#" class="nav-item" data-page="dashboard">
                <span class="nav-icon">📈</span>
                <span class="nav-text">投資儀表板</span>
            </a>
            <a href="#" class="nav-item" data-page="settings">
                <span class="nav-icon">⚙️</span>
                <span class="nav-text">設定</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="api-status">
                <span class="status-dot" id="api-status-dot"></span>
                <span id="api-status-text">API 未連接</span>
            </div>
        </div>
    </aside>

    <!-- 主內容區 -->
    <div class="main-wrapper">
        <!-- 頂部標題欄 -->
        <header class="top-header">
            <div class="header-left">
                <button class="menu-btn" id="mobile-menu-btn">☰</button>
                <h1>AI投資決策小幫手</h1>
            </div>
            <div class="header-right">
                <div class="quick-search">
                    <input type="text" id="quick-search" placeholder="快速搜尋股票代碼..." class="search-input">
                    <button class="search-btn" id="quick-search-btn">🔍</button>
                </div>
            </div>
        </header>

        <!-- 主內容 -->
        <main class="content" id="main-content">

            <!-- 頁面：股票分析 -->
            <div class="page active" id="page-analysis">
                <!-- AI 評分卡片（新功能）-->
                <section class="ai-score-card" id="ai-score-section" style="display: none;">
                    <div class="score-container">
                        <div class="score-circle">
                            <svg width="180" height="180">
                                <circle cx="90" cy="90" r="75" fill="none" stroke="#e0e0e0" stroke-width="15"/>
                                <circle id="score-progress" cx="90" cy="90" r="75" fill="none" stroke="#1e88e5"
                                        stroke-width="15" stroke-linecap="round"
                                        stroke-dasharray="471" stroke-dashoffset="471"
                                        transform="rotate(-90 90 90)"/>
                            </svg>
                            <div class="score-value">
                                <span id="ai-score">0</span>
                                <span class="score-max">/10</span>
                            </div>
                        </div>
                        <div class="score-info">
                            <h3 id="score-stock-name">股票評分</h3>
                            <p class="score-label" id="score-label">待分析</p>
                            <div class="score-metrics">
                                <div class="metric">
                                    <span class="metric-icon">📈</span>
                                    <span class="metric-label">技術面</span>
                                    <span class="metric-value" id="technical-score">-</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-icon">💼</span>
                                    <span class="metric-label">基本面</span>
                                    <span class="metric-value" id="fundamental-score">-</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-icon">💬</span>
                                    <span class="metric-label">情緒面</span>
                                    <span class="metric-value" id="sentiment-score">-</span>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="add-to-watchlist-btn">
                                <span>⭐</span> 加入觀察清單
                            </button>
                        </div>
                    </div>
                </section>

                <!-- 原有的分析配置區 -->
                <section id="config-section" class="card">
                    <div class="card-header">
                        <h2>📊 分析配置</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="market-select">選擇市場</label>
                                <select id="market-select" class="form-control">
                                    <option value="AUTO">🤖 自動識別（推薦）</option>
                                    <option value="TW">🇹🇼 台股 (TW)</option>
                                    <option value="US">🇺🇸 美股 (US)</option>
                                    <option value="HK">🇭🇰 港股 (HK)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="stock-input">股票代碼</label>
                                <input type="text" id="stock-input" class="form-control" placeholder="例如：TSLA, 2330, 00700">
                            </div>

                            <div class="form-group">
                                <label for="analysis-date">分析日期</label>
                                <input type="date" id="analysis-date" class="form-control">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>研究深度 <span id="depth-value">3</span> 級</label>
                            <div class="slider-container">
                                <input type="range" id="depth-slider" min="1" max="5" value="3" class="slider">
                                <div class="slider-labels">
                                    <span>1級 - 快速</span>
                                    <span>3級 - 標準</span>
                                    <span>5級 - 深度</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>👥 選擇分析師團隊</label>
                            <div class="agent-selection">
                                <div class="agent-option">
                                    <input type="checkbox" id="agent-technical" checked>
                                    <label for="agent-technical">
                                        <span class="agent-icon">📈</span>
                                        <span>技術分析師</span>
                                    </label>
                                </div>
                                <div class="agent-option">
                                    <input type="checkbox" id="agent-fundamental" checked>
                                    <label for="agent-fundamental">
                                        <span class="agent-icon">💼</span>
                                        <span>基本面分析師</span>
                                    </label>
                                </div>
                                <div class="agent-option">
                                    <input type="checkbox" id="agent-news" checked>
                                    <label for="agent-news">
                                        <span class="agent-icon">📰</span>
                                        <span>新聞分析師</span>
                                    </label>
                                </div>
                                <div class="agent-option">
                                    <input type="checkbox" id="agent-sentiment" checked>
                                    <label for="agent-sentiment">
                                        <span class="agent-icon">💬</span>
                                        <span>情緒分析師</span>
                                    </label>
                                </div>
                            </div>
                            <p class="selected-count">已選擇 <strong id="agent-count">4</strong> 個分析師</p>
                        </div>

                        <div class="button-group">
                            <button id="start-analysis-btn" class="btn btn-primary">
                                <span class="btn-icon">🚀</span>
                                開始分析
                            </button>
                            <button id="export-pdf-btn" class="btn btn-secondary" style="display: none;">
                                <span class="btn-icon">📄</span>
                                匯出PDF
                            </button>
                        </div>
                    </div>
                </section>

                <!-- 分析進度區 -->
                <section id="progress-section" class="card" style="display: none;">
                    <div class="card-header">
                        <h2>📊 分析進度</h2>
                    </div>
                    <div class="card-body">
                        <div class="progress-info">
                            <p class="current-step">當前步驟: <strong id="current-step-text">初始化</strong></p>
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="progress-bar"></div>
                                <span class="progress-text" id="progress-percent">0%</span>
                            </div>
                            <div class="time-info">
                                <span>⏱️ 已用時間: <strong id="elapsed-time">0秒</strong></span>
                                <span>⏳ 預計剩餘: <strong id="remaining-time">計算中...</strong></span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 投資決策摘要區 -->
                <section id="summary-section" class="card" style="display: none;">
                    <div class="card-header">
                        <h2 id="stock-title">📊 分析結果</h2>
                    </div>
                    <div class="card-body">
                        <div class="summary-grid">
                            <div class="summary-card">
                                <div class="summary-icon">💡</div>
                                <div class="summary-content">
                                    <div class="summary-label">投資建議</div>
                                    <div class="summary-value large" id="recommendation">分析中</div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-icon">🎯</div>
                                <div class="summary-content">
                                    <div class="summary-label">置信度</div>
                                    <div class="summary-value" id="confidence">-</div>
                                    <div class="summary-change" id="confidence-change"></div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-icon">⚠️</div>
                                <div class="summary-content">
                                    <div class="summary-label">風險評分</div>
                                    <div class="summary-value" id="risk-score">-</div>
                                    <div class="summary-change" id="risk-change"></div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-icon">💰</div>
                                <div class="summary-content">
                                    <div class="summary-label">目標價位</div>
                                    <div class="summary-value" id="target-price">-</div>
                                </div>
                            </div>
                        </div>

                        <div class="ai-reasoning">
                            <h3>🧠 AI分析推理</h3>
                            <div id="ai-reasoning-content" class="reasoning-content">載入中...</div>
                        </div>

                        <button id="view-detail-btn" class="btn btn-primary">查看詳細報告</button>
                    </div>
                </section>

                <!-- 詳細分析報告區 -->
                <section id="detail-section" class="card" style="display: none;">
                    <div class="card-header">
                        <h2>📋 詳細分析報告</h2>
                    </div>
                    <div class="card-body">
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="technical">📈 技術面</button>
                            <button class="tab-btn" data-tab="fundamental">💼 基本面</button>
                            <button class="tab-btn" data-tab="sentiment">💬 情緒面</button>
                            <button class="tab-btn" data-tab="news">📰 新聞</button>
                            <button class="tab-btn" data-tab="risk">⚠️ 風險</button>
                            <button class="tab-btn" data-tab="rec">💡 建議</button>
                        </div>
                        <div class="tab-content">
                            <div id="technical-tab" class="tab-pane active">
                                <div id="technical-content" class="content-area">載入中...</div>
                            </div>
                            <div id="fundamental-tab" class="tab-pane">
                                <div id="fundamental-content" class="content-area">載入中...</div>
                            </div>
                            <div id="sentiment-tab" class="tab-pane">
                                <div id="sentiment-content" class="content-area">載入中...</div>
                            </div>
                            <div id="news-tab" class="tab-pane">
                                <div id="news-content" class="content-area">載入中...</div>
                            </div>
                            <div id="risk-tab" class="tab-pane">
                                <div id="risk-content" class="content-area">載入中...</div>
                            </div>
                            <div id="rec-tab" class="tab-pane">
                                <div id="rec-content" class="content-area">載入中...</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 頁面：觀察清單 -->
            <div class="page" id="page-watchlist">
                <div class="page-header">
                    <h2>⭐ 我的觀察清單</h2>
                    <p>追蹤您感興趣的股票</p>
                </div>

                <div id="watchlist-empty" class="empty-state">
                    <div class="empty-icon">📋</div>
                    <h3>觀察清單是空的</h3>
                    <p>分析股票後，點擊「加入觀察清單」來追蹤它們</p>
                </div>

                <div id="watchlist-container" class="watchlist-grid"></div>
            </div>

            <!-- 頁面：分析歷史 -->
            <div class="page" id="page-history">
                <div class="page-header">
                    <h2>📜 分析歷史記錄</h2>
                    <p>查看過去的分析結果</p>
                    <button class="btn btn-secondary" id="clear-history-btn">🗑️ 清空歷史</button>
                </div>

                <div id="history-empty" class="empty-state">
                    <div class="empty-icon">📊</div>
                    <h3>還沒有分析記錄</h3>
                    <p>開始分析股票，您的分析結果將自動保存在這裡</p>
                </div>

                <div id="history-container" class="history-list"></div>
            </div>

            <!-- 頁面：股票比較 -->
            <div class="page" id="page-compare">
                <div class="page-header">
                    <h2>⚖️ 股票比較</h2>
                    <p>並排比較多檔股票的分析結果</p>
                </div>

                <div class="compare-selector">
                    <p>從觀察清單或歷史記錄中選擇股票進行比較</p>
                    <button class="btn btn-primary" id="start-compare-btn">選擇股票比較</button>
                </div>

                <div id="compare-container" class="compare-grid"></div>
            </div>

            <!-- 頁面：投資儀表板 -->
            <div class="page" id="page-dashboard">
                <div class="page-header">
                    <h2>📈 投資儀表板</h2>
                    <p>全方位投資分析視圖</p>
                </div>

                <!-- 核心統計卡片區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">📊 核心統計</h3>
                    <div class="dashboard-stats stats-grid-4x3">
                        <!-- 第一排：原有4個卡片 -->
                        <div class="stat-card">
                            <div class="stat-icon">⭐</div>
                            <div class="stat-value" id="total-watchlist">0</div>
                            <div class="stat-label">觀察中</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">📊</div>
                            <div class="stat-value" id="total-analyses">0</div>
                            <div class="stat-label">總分析次數</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">💡</div>
                            <div class="stat-value" id="buy-signals">0</div>
                            <div class="stat-label">買入信號</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">⚠️</div>
                            <div class="stat-value" id="sell-signals">0</div>
                            <div class="stat-label">賣出信號</div>
                        </div>

                        <!-- 第二排：新增4個卡片 -->
                        <div class="stat-card">
                            <div class="stat-icon">📈</div>
                            <div class="stat-value" id="avg-ai-score">0</div>
                            <div class="stat-label">平均AI評分</div>
                            <div class="stat-trend" id="avg-score-trend"></div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🏆</div>
                            <div class="stat-value" id="highest-score-value">-</div>
                            <div class="stat-label" id="highest-score-label">最高評分股票</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">📉</div>
                            <div class="stat-value" id="lowest-score-value">-</div>
                            <div class="stat-label" id="lowest-score-label">最低評分股票</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🔵</div>
                            <div class="stat-value" id="hold-signals">0</div>
                            <div class="stat-label">持有信號</div>
                        </div>

                        <!-- 第三排：新增4個卡片 -->
                        <div class="stat-card">
                            <div class="stat-icon">📅</div>
                            <div class="stat-value" id="analyses-7days">0</div>
                            <div class="stat-label">最近7天分析</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">📆</div>
                            <div class="stat-value" id="analyses-30days">0</div>
                            <div class="stat-label">最近30天分析</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🔥</div>
                            <div class="stat-value" id="most-analyzed-value">-</div>
                            <div class="stat-label" id="most-analyzed-label">最常分析股票</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🎯</div>
                            <div class="stat-value" id="avg-depth">0</div>
                            <div class="stat-label">平均分析深度</div>
                        </div>
                    </div>
                </section>

                <!-- 時間趨勢分析區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">⏱️ 時間趨勢分析</h3>
                    <div class="dashboard-charts charts-2col">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h4>AI評分時間趨勢</h4>
                                <div class="chart-legend">
                                    <label><input type="checkbox" checked onchange="toggleChartLine('overall', this.checked)"> 總評分</label>
                                    <label><input type="checkbox" onchange="toggleChartLine('technical', this.checked)"> 技術面</label>
                                    <label><input type="checkbox" onchange="toggleChartLine('fundamental', this.checked)"> 基本面</label>
                                    <label><input type="checkbox" onchange="toggleChartLine('sentiment', this.checked)"> 情緒面</label>
                                </div>
                            </div>
                            <canvas id="scoreTrendChart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>分析頻率統計</h4>
                            <canvas id="analysisFrequencyChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 市場分析區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">🌏 市場分析</h3>
                    <div class="dashboard-charts charts-3col">
                        <div class="chart-container">
                            <h4>市場分布</h4>
                            <canvas id="marketDistributionChart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>各市場平均評分</h4>
                            <canvas id="marketAvgScoreChart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>市場投資建議分布</h4>
                            <canvas id="marketRecommendationChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 多維度評分分析區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">🎯 多維度評分分析</h3>
                    <div class="dashboard-charts charts-2col">
                        <div class="chart-container">
                            <h4>平均多維度雷達圖</h4>
                            <canvas id="dimensionRadarChart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>各維度評分分布</h4>
                            <canvas id="dimensionDistributionChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 風險分析區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">⚠️ 風險分析</h3>
                    <div class="dashboard-charts charts-2col">
                        <div class="chart-container">
                            <h4>風險等級分布</h4>
                            <canvas id="riskDistributionChart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h4>風險-收益矩陣</h4>
                            <canvas id="riskReturnScatterChart"></canvas>
                            <div class="scatter-legend">
                                <div class="quadrant high-risk-high-return">高風險高收益</div>
                                <div class="quadrant low-risk-high-return">低風險高收益</div>
                                <div class="quadrant high-risk-low-return">高風險低收益</div>
                                <div class="quadrant low-risk-low-return">低風險低收益</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 原有圖表區（保留相容性） -->
                <section class="dashboard-section">
                    <h3 class="section-title">📊 評分與建議分布</h3>
                    <div class="dashboard-charts charts-2col">
                        <div class="chart-container">
                            <h4>觀察清單 AI 評分分布</h4>
                            <canvas id="scoreDistributionChart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h4>投資建議分布</h4>
                            <canvas id="recommendationChart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 數據表格區 -->
                <section class="dashboard-section">
                    <h3 class="section-title">📋 詳細數據</h3>

                    <!-- 表格標籤頁 -->
                    <div class="table-tabs">
                        <button class="table-tab-btn active" onclick="switchTableTab('watchlist')">觀察清單</button>
                        <button class="table-tab-btn" onclick="switchTableTab('recent')">最近分析</button>
                        <button class="table-tab-btn" onclick="switchTableTab('comparison')">指標對比</button>
                    </div>

                    <!-- 表格內容 -->
                    <div class="table-tab-content">
                        <!-- 觀察清單表格 -->
                        <div id="table-watchlist" class="table-pane active">
                            <div class="data-table-container">
                                <div class="table-controls">
                                    <input type="text" id="watchlist-search" placeholder="搜尋股票代碼..." onkeyup="filterWatchlistTable()">
                                    <select id="watchlist-filter" onchange="filterWatchlistTable()">
                                        <option value="all">所有市場</option>
                                        <option value="TW">台股</option>
                                        <option value="US">美股</option>
                                        <option value="HK">港股</option>
                                    </select>
                                </div>

                                <div class="table-wrapper">
                                    <table class="sortable-table" id="watchlist-table">
                                        <thead>
                                            <tr>
                                                <th onclick="sortWatchlistTable('stock')">股票代碼</th>
                                                <th onclick="sortWatchlistTable('market')">市場</th>
                                                <th onclick="sortWatchlistTable('aiScore')">AI評分</th>
                                                <th onclick="sortWatchlistTable('technical')">技術面</th>
                                                <th onclick="sortWatchlistTable('fundamental')">基本面</th>
                                                <th onclick="sortWatchlistTable('sentiment')">情緒面</th>
                                                <th onclick="sortWatchlistTable('recommendation')">建議</th>
                                                <th onclick="sortWatchlistTable('addedDate')">加入日期</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="watchlist-table-body">
                                            <!-- 動態生成 -->
                                        </tbody>
                                    </table>
                                </div>

                                <div class="table-pagination">
                                    <button onclick="prevWatchlistPage()" id="watchlist-prev">上一頁</button>
                                    <span id="watchlist-page-info">第 1 頁</span>
                                    <button onclick="nextWatchlistPage()" id="watchlist-next">下一頁</button>
                                </div>
                            </div>
                        </div>

                        <!-- 最近分析表格 -->
                        <div id="table-recent" class="table-pane">
                            <div class="data-table-container">
                                <div class="table-wrapper">
                                    <table class="sortable-table" id="recent-table">
                                        <thead>
                                            <tr>
                                                <th>時間</th>
                                                <th>股票代碼</th>
                                                <th>市場</th>
                                                <th>深度</th>
                                                <th>AI評分</th>
                                                <th>建議</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recent-table-body">
                                            <!-- 動態生成 -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- 指標對比表格 -->
                        <div id="table-comparison" class="table-pane">
                            <div class="data-table-container">
                                <div class="table-wrapper">
                                    <table class="sortable-table" id="comparison-table">
                                        <thead>
                                            <tr>
                                                <th>排名</th>
                                                <th>股票代碼</th>
                                                <th>市場</th>
                                                <th>AI總評分</th>
                                                <th>技術面</th>
                                                <th>基本面</th>
                                                <th>情緒面</th>
                                                <th>投資建議</th>
                                            </tr>
                                        </thead>
                                        <tbody id="comparison-table-body">
                                            <!-- 動態生成 -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- 設定頁面 -->
            <div class="page" id="page-settings">
                <div class="page-header">
                    <h2>⚙️ 設定</h2>
                    <p>配置您的 API Key 和其他選項</p>
                </div>

                <div class="settings-container">
                    <div class="setting-card">
                        <div class="setting-header">
                            <h3>🔑 OpenAI API Key</h3>
                            <span class="api-status-badge" id="api-key-status">未設定</span>
                        </div>
                        <p class="setting-description">
                            請輸入您的 OpenAI API Key 以使用 AI 分析功能。您的 API Key 僅保存在本地瀏覽器中，不會上傳到任何伺服器。
                        </p>

                        <div class="api-key-input-group">
                            <input
                                type="password"
                                id="api-key-input"
                                placeholder="sk-proj-..."
                                class="api-key-input"
                            >
                            <button id="toggle-api-key" class="btn btn-secondary">👁️ 顯示</button>
                        </div>

                        <div class="setting-actions">
                            <button id="save-api-key-btn" class="btn btn-primary">💾 保存 API Key</button>
                            <button id="clear-api-key-btn" class="btn btn-danger">🗑️ 清除 API Key</button>
                        </div>

                        <div class="setting-help">
                            <h4>📖 如何獲取 API Key？</h4>
                            <ol>
                                <li>訪問 <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI API Keys</a></li>
                                <li>登入您的 OpenAI 帳號</li>
                                <li>點擊 "Create new secret key" 創建新密鑰</li>
                                <li>複製密鑰並粘貼到上方輸入框</li>
                                <li>點擊「保存 API Key」</li>
                            </ol>

                            <h4>⚠️ 安全提醒</h4>
                            <ul>
                                <li>API Key 存儲在您的瀏覽器本地存儲中</li>
                                <li>清除瀏覽器數據會刪除已保存的 API Key</li>
                                <li>建議在 OpenAI 平台設置使用額度限制</li>
                                <li>定期更換 API Key 以確保安全</li>
                            </ul>
                        </div>
                    </div>

                    <div class="setting-card">
                        <div class="setting-header">
                            <h3>🎨 其他設定</h3>
                        </div>

                        <div class="setting-item">
                            <label for="model-select">AI 模型選擇</label>
                            <select id="model-select" class="setting-select">
                                <option value="gpt-4o-mini">GPT-4o Mini (推薦，成本較低)</option>
                                <option value="gpt-4o">GPT-4o (更強大)</option>
                                <option value="gpt-4-turbo">GPT-4 Turbo</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <label for="auto-save">自動保存分析記錄</label>
                            <input type="checkbox" id="auto-save" checked>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- 載入腳本 -->
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
